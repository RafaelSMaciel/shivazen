{% extends 'estrutura/base.html' %}
{% load static %}

{% block conteudo %}
<main class="main">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card">
                    <div class="header">
                        <a href="{% url 'shivazen:inicio' %}">
                            <img src="{% static 'assents/LogoCompletaSemFundo.png' %}" alt="Shiva Zen" class="login-logo">
                        </a>
                        <h2 class="title">Crie sua conta</h2>
                        <div class="cadastro-footer mt-4">
                            <p>Estas informações também vão fazer parte do seu prontuário.</p>
                        </div>
                    </div>
                    
                    <div class="login-body">
                        {% if messages %}
                            {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} mb-4" role="alert">
                                {{ message }}
                            </div>
                            {% endfor %}
                        {% endif %}

                        <form id="cadastro-form" method="POST" action="{% url 'shivazen:usuarioCadastro' %}">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="nome-completo" class="form-label">Nome Completo</label>
                                    <input type="text" id="nome-completo" name="nome-completo" class="form-control" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cpf" class="form-label">CPF</label>
                                    <input type="text" id="cpf" name="cpf" class="form-control" placeholder="000.000.000-00" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">E-mail</label>
                                <input type="email" id="email" name="email" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="telefone" class="form-label">Telefone</label>
                                <input type="tel" id="telefone" name="telefone" class="form-control" placeholder="(00) 00000-0000" required>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="senha" class="form-label">Senha</label>
                                    <input type="password" id="senha" name="senha" class="form-control" required>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <label for="confirmar-senha" class="form-label">Confirmar Senha</label>
                                    <input type="password" id="confirmar-senha" name="confirmar-senha" class="form-control" required>
                                </div>
                            </div>
                            <div class="d-grid gap-3">
                                <button type="submit" class="btn btn-primary">Criar Conta</button>
                                <p>Já tem conta? <a href="{% url 'shivazen:usuarioLogin' %}">Faça Login</a></p>
                            </div>
                        </form>
                        <div class="texto-footer mt-4">
                            <p>Ao se cadastrar, você concorda com nossos <a href="{% url 'shivazen:termosUso' %}">Termos de Uso</a> e <a href="{% url 'shivazen:politicaPrivacidade' %}">Política de Privacidade</a>.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function(){
    $('#cpf').mask('000.000.000-00', {reverse: true});
    $('#telefone').mask('(00) 00000-0000');
    
    $('#cadastro-form').submit(function(e){
      if($('#senha').val() !== $('#confirmar-senha').val()) {
        alert('As senhas não coincidem!');
        e.preventDefault();
      } else if ($('#senha').val().length < 8) {
        alert('A senha deve ter pelo menos 8 caracteres!');
        e.preventDefault();
      }
    });
  });
</script>
{% endblock %}